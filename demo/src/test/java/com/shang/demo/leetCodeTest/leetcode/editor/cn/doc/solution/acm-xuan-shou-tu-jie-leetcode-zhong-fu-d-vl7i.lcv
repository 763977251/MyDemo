å¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯å¸…è›‹ã€‚

ä»Šå¤©è§£å†³**é‡å¤çš„å­å­—ç¬¦ä¸²**ï¼Œæ˜¯ KMP ç®—æ³•çš„å˜å½¢é¢˜ã€‚

è¿™é“é¢˜æ¯”è¾ƒæœ‰æ„æ€ï¼ŒæŠŠæˆ‘å¡äº†ä¿©å°æ—¶ï¼Œåæ¥æ˜¯åœ¨å¥èº«æˆ¿æ¨èƒ¸çš„æ—¶å€™çµå…‰ä¸€é—ª...

å·²ç»å¾ˆä¹…æ²¡ç¢°åˆ°è¦æäº¤ä¸¤æ¬¡æ‰èƒ½ AC çš„é¢˜äº†ã€‚

![ae62f6a5c5c25aae03f0f41a61a7c58](https://pic.leetcode-cn.com/1644898183-OBzQJd-20220122_202523974_0.jpg)

ç‰›çš®ä¸å¤šå¹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™é“é¢˜ã€‚

![e84804884c9026ac13faea239eea97d](https://pic.leetcode-cn.com/1644898183-QrAPsq-20220122_202546982_0.jpg)

# LeetCode 459ï¼šé‡å¤çš„å­å­—ç¬¦ä¸²

## é¢˜æ„

ç»™å®šä¸€ä¸ªéç©ºçš„å­å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦å¯ä»¥ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚

## ç¤ºä¾‹

è¾“å…¥ï¼š"abab"
è¾“å‡ºï¼šTrue

## æç¤º

- ç»™å®šçš„å­—ç¬¦ä¸²åªå«æœ‰å°å†™è‹±æ–‡å­—æ¯ï¼Œå¹¶ä¸”é•¿åº¦ä¸è¶…è¿‡ 10000ã€‚

# é¢˜ç›®è§£æ

å®˜æ–¹éš¾åº¦è¯„çº§ï¼Œæœ¬é¢˜ä¸ºç®€å•ï¼Œæˆ‘æ€€ç–‘ LeetCode æ˜¯åœ¨æå¿ƒæ€...

è¿™è¦æ˜¯é“ç®€å•é¢˜ï¼Œæˆ‘ç›´æ’­...å’³å’³...

![9a538ad5b9c1d7c27ae137c67837904](https://pic.leetcode-cn.com/1644898183-zYJnlK-20220122_202718151_0.jpg)

ä¹‹å‰ KMP ç®—æ³•æˆ‘ä»¬è¯´çš„æ˜¯è§£å†³æ¨¡å¼ä¸²åœ¨ä¸»ä¸²ä¸­çš„ä½ç½®ï¼Œé‡å¤çš„å­å­—ç¬¦ä¸²è¿™é“é¢˜ä¸æ˜¯æ±‚å­ä¸²åœ¨ä¸»ä¸²ä¸­å‡ºç°çš„ä½ç½®ï¼Œè€Œæ˜¯åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯ç”±å¤šä¸ªé‡å¤å­ä¸²æ„æˆã€‚

å®˜æ–¹ç‚¹è®²ï¼Œè¿™æ˜¯**å‘¨æœŸæ€§å­—ç¬¦ä¸²é—®é¢˜ï¼ŒKMP æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„ç»å…¸è§£æ³•**ã€‚

ä½†æ˜¯è™½è¯´æ˜¯ KMPï¼Œä½†æ˜¯ç”¨åˆ°çš„åªæ˜¯æ±‚ next çš„é‚£ä¸€å—ï¼Œå‰©ä¸‹çš„ï¼Œå¾—é æ¨å…¬å¼...

æˆ‘ç›´æ¥å…ˆæ¥è¯´ä¸‹å…¬å¼ï¼š

* 

```
len(s) % (len(s) -  maxLen) = 0
```

å…¶ä¸­ **len(s) ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦**ï¼Œ**maxLen ä¸ºæœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦**ã€‚

æ‰€ä»¥è¿™ä¸ªå…¬å¼ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ï¼š**å¦‚æœ s æ˜¯å‘¨æœŸä¸²ï¼Œé‚£ã€s çš„é•¿åº¦ã€‘æ˜¯ã€s çš„é•¿åº¦å‡å»æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦ã€‘çš„å€æ•°ï¼Œé‚£å­—ç¬¦ä¸² s å°±æ˜¯å‘¨æœŸä¸²**ã€‚

è‡³äºä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªå…¬å¼ï¼Œå°±å¾—ä»ç›˜å¤å¼€å¤©è¾Ÿåœ°å¼€å§‹äº†...

![3be8bd01b3cdb1bbf775929e91d6100](https://pic.leetcode-cn.com/1644898183-yAhUuA-20220122_202803376_0.jpg)

æœ‰å…´è¶£çš„å»ä»”ç»†ç ”ç©¶ä¸‹è¿™ç¯‡æ–‡ç« çš„æ¨ç†ï¼Œè®²çš„çœŸçš„éå¸¸å¥½ï¼Œå›¾æ–‡å¹¶èŒ‚ï¼Œä¿è¯è®¤çœŸçœ‹å®Œå°±æ‡‚äº†...

> https://writings.sh/post/algorithm-repeated-string-pattern

è‡³äºä¸Šé¢æ‰€è¯´çš„æœ€é•¿å…¬å…±å‰åç¼€å°±æ˜¯ nextã€‚

å…·ä½“å¦‚ä½•æ±‚æˆ‘åœ¨ä¹‹å‰ KMP çš„å…¥é—¨æ–‡ç« ä¸­æœ‰è¯¦ç»†ä»‹ç»ï¼š

[**ACM é€‰æ‰‹å¸¦ä½ ç©è½¬ KMP ç®—æ³•ï¼**](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475924907&idx=1&sn=6f6fc1475be2d7d2ca5ab6e0ec755bca&chksm=ff22fa26c8557330a906f6ed9f444d71064a590109b093d8e97f0ab1cd82e5106a5138e8aecd&scene=21#wechat_redirect)

![4e166ecd5f77fc61ce47efcea7a6030](https://pic.leetcode-cn.com/1644898183-xjtcoc-20220122_202836035_0.jpg)

![91c76734543396e27df8bbdd67bba16](https://pic.leetcode-cn.com/1644898183-Shsxxn-20220122_202849822_0.jpg)

next æ•°ç»„æ˜¯**ä» 0 å¼€å§‹çš„ï¼Œä¸”å®ƒå­˜çš„æ˜¯ä½ç½®**ï¼Œæ‰€ä»¥æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦åº”è¯¥æ˜¯ **next[len(s) - 1] + 1**ã€‚

ä½†æ˜¯åªçŸ¥é“å…¬å¼æ˜¯ä¸å¤Ÿçš„ï¼Œè¿™é“é¢˜è¿˜æ˜¯ä¼šå¡ä½ï¼Œæ²¡é”™ï¼Œå°±æ˜¯æˆ‘...

* Python

```Python
if maxLen == 0 or s[n - 1] != s[n - 1 - maxLen]:
    return False
```

or å‰é¢é‚£ä¸ªæˆ‘å°±ä¸è¯´äº†ï¼ŒmaxLen == 0 å³ next[len(s) - 1] == -1ï¼Œæ‰¾æ— å¯æ‰¾ï¼Œè‚¯å®šä¸å­˜åœ¨é‡å¤ã€‚

ä¸‹é¢æ¥é‡ç‚¹è¯´ä¸‹ or åé¢è¿™ä¸ªï¼Œæˆ‘å°±æ˜¯ç¼ºäº†è¿™è¡Œä»£ç ã€‚

![4b6ffc34e97fe805fdb95aacd9bb65c](https://pic.leetcode-cn.com/1644898183-wsiGcE-20220122_202945552_0.jpg)

è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼ŒæŒ‰ç…§æˆ‘åœ¨ã€[**KMP ç®—æ³•å…¥é—¨**](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475924907&idx=1&sn=6f6fc1475be2d7d2ca5ab6e0ec755bca&chksm=ff22fa26c8557330a906f6ed9f444d71064a590109b093d8e97f0ab1cd82e5106a5138e8aecd&scene=21#wechat_redirect)ã€‘æ–‡ç« é‡Œè®²çš„ next æ±‚æ³•ï¼š

â€œababâ€ çš„ next å€¼ä¸º [-1,0,0,1]ï¼Œâ€œabacâ€ çš„ next å€¼ä¹Ÿä¸º [-1,0,0,1]ï¼Œå‰è€…æ˜¯å‘¨æœŸä¸²ï¼Œåè€…ä¸æ˜¯ï¼Œä½†æ˜¯åè€…çš„ next å€¼å’Œå‰è€…ä¸€æ ·ï¼Œéƒ½ä¼šè¢«ç®—æˆå‘¨æœŸä¸²ã€‚

é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå°±æ˜¯åŠ ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼š

* Python

```Python
s[n - 1] != s[n - 1 - maxLen]
```

å³**å¦‚æœæ˜¯å‘¨æœŸä¸²ï¼Œé‚£å¯¹åº”ä½ç½®ä¸Šçš„å­—æ¯åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœå¯¹åº”ä½ç½®ä¸Šçš„å­—æ¯ä¸ä¸€æ ·ï¼Œé‚£å°±è‚¯å®šä¸æ˜¯å‘¨æœŸä¸²**ã€‚

![d90c456c4dae742652a3eaef4f6c879](https://pic.leetcode-cn.com/1644898183-FjPpXb-20220122_203023580_0.jpg)

å¤§å®¶ä¸€å®šè¦æ³¨æ„ã€‚

# ä»£ç å®ç°

## Python ä»£ç å®ç°

* Python

```Python
class Solution:
    def getNext(self, s: str):
        # åç¼€åŒ¹é…æŒ‡å‘
        i = 0
        # å‰ç¼€åŒ¹é…æŒ‡å‘
        j = -1
        # åˆå§‹åŒ– next æ•°ç»„
        next = [-1] * len(s)

        # æ­¤å¤„ next[0] = -1ï¼Œæ‰€ä»¥åªéœ€è¦æ±‚å‰©ä¸‹çš„ len(T)-1 ä¸ªå³å¯
        while i < len(s) - 1:
            # j == -1 å°±æ˜¯æ‰¾æ— å¯æ‰¾ or åŒ¹é…æˆåŠŸï¼Œç›¸åŒå‰ç¼€é•¿åº¦å¢åŠ 1
            if j == -1 or s[i] == s[j]:
                i += 1
                j += 1
                next[i] = j
            # åŒ¹é…ä¸æˆåŠŸåˆ™åœ¨å‰é¢çš„å­ä¸²ä¸­ç»§ç»­æœç´¢ï¼Œç›´è‡³æ‰¾ä¸åˆ°ï¼ˆå³ j== -1 çš„æƒ…å†µï¼‰
            else:
                j = next[j]

        return next

    def repeatedSubstringPattern(self, s: str) -> bool:

        if len(s) == 0:
            return False

        next = self.getNext(s)
        n = len(s)
        # æœ€é•¿å…¬å…±å‰åç¼€
        maxLen = next[n - 1] + 1

        if maxLen == 0 or s[n - 1] != s[n - 1 - maxLen]:
            return False

        return n % (n - maxLen) == 0
```

## Java ä»£ç å®ç°

* Java

```Java
class Solution {
    
    public int[] getNext(String s){
        int i = 0;
        int j = -1;
        int n = s.length();
        
        int[] next = new int[n];
        next[0] = -1;

        while(i < n - 1){
            if(j == -1 || s.charAt(i) == s.charAt(j)){
                i += 1;
                j += 1;
                next[i] = j;
            }else{
                j = next[j];
            }
        }
        return next;
    }


    public boolean repeatedSubstringPattern(String s) {
        int n = s.length();

        if (n == 0){
            return false;
        }

        int[] next = getNext(s);
        int maxLen = next[n - 1] + 1;

        if(maxLen == 0 || s.charAt(n - 1) != s.charAt(n - 1 - maxLen)){
            return false;
        }

        return n % (n - maxLen) == 0;
    }
}
```

**å›¾è§£é‡å¤çš„å­å­—ç¬¦ä¸²**åˆ°è¿™å°±ç»“æŸè¾£ï¼Œå‘ƒï¼Œä»¥åç¢°åˆ°è¿™ç§ç±»å‹çš„é¢˜è®°å¾—ç”¨ KMP å°±å¥½äº†ã€‚

å¦‚æœèƒ½æŠŠå…¬å¼ä»¥åŠä¸ºä½•å…¬å¼è¦è¿™ä¹ˆæ¨ææ‡‚æ›´å¥½ã€‚

å¦‚æœæä¸æ‡‚é—®é¢˜ä¹Ÿä¸å¤§ï¼Œæœ¬èº«åªæ˜¯ä¸ºäº†è®©ä½ ç»ƒä¹ ä¸€ä¸‹ KMP çš„ç”¨æ³•ï¼Œ**ä¸è¦è¢«å›°ä½**ã€‚

---

## å†™åœ¨æœ€å

**å¦‚æœä½ è§‰å¾—æœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ°å‘€**

ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»[**å…³æ³¨æˆ‘**](https://gitee.com/codegoudan/codegoudanIMG/raw/master/202201/20220111_105721924_0.jpg)ï¼Œè§£é”æ›´å¤šå›¾è§£ LeetCodeï¼Œä¸€èµ·ç©è½¬æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼

æˆ‘æ˜¯å¸…è›‹ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ï¼

<br />

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬ KMP ç®—æ³•](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475924907&idx=1&sn=6f6fc1475be2d7d2ca5ab6e0ec755bca&chksm=ff22fa26c8557330a906f6ed9f444d71064a590109b093d8e97f0ab1cd82e5106a5138e8aecd&scene=21#wechat_redirect)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM å›¾è§£ LeetCode å®ç° strStr()](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&amp;mid=2475925022&amp;idx=1&amp;sn=c115447f8ac5ef02793ec28918f7e032&amp;chksm=ff22f993c85570856c237165a93340c76f7322f7538d16a7c15782f7cf8cd7375887e8db329f&token=290396534&lang=zh_CN#rd)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475918746&idx=1&sn=3fe42234a1f07fb084d11fe06fb24893&chksm=ff22e217c8556b019b9052f9d4805174385ba4c8c099216fa226dbd1b033a9a49782579e4b75&scene=21#wechat_redirect)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬æ ˆå’Œé˜Ÿåˆ—](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475919772&idx=1&sn=8574188f72d892d501f15956b6a2a629&chksm=ff22ee11c8556707dd6d5af977125ce6698ebbcfaa3b9083e14c3658d2975761079a9c2082a4&scene=21#wechat_redirect)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬å“ˆå¸Œè¡¨](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475921482&idx=1&sn=a0010596ea33c8605ed02b941cdfe854&chksm=ff22f7c7c8557ed1383751061be7d701e026a75ad0e22199356c826c05efcde955d99cccc4d5&scene=21#wechat_redirect)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬äºŒåˆ†æŸ¥æ‰¾](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475922852&idx=1&sn=f6990bcafef36c96599866ab99bb25f2&chksm=ff22f229c8557b3fab35b99c29038eb4ea0c024010128eb09e8923922666e16e3928b1ed4edf&scene=21#wechat_redirect)

