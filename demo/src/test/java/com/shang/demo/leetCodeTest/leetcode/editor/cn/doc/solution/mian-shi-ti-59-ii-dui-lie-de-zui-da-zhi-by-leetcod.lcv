### ðŸ“º è§†é¢‘é¢˜è§£

![...- II. é˜Ÿåˆ—çš„æœ€å¤§å€¼(1).mp4](https://leetcode.cn/problems/dui-lie-de-zui-da-zhi-lcof/solution/mian-shi-ti-59-ii-dui-lie-de-zui-da-zhi-by-leetcod/38597adb-b2c9-4c7c-86be-7a1dbfea42fd)

### ðŸ“– æ–‡å­—é¢˜è§£

#### æ–¹æ³•ä¸€ï¼šæš´åŠ›

**æ€è·¯**

ç›´æŽ¥å®žçŽ°ä¸€ä¸ªæ™®é€šçš„é˜Ÿåˆ—ï¼ŒæŸ¥è¯¢æœ€å¤§å€¼æ—¶éåŽ†è®¡ç®—ã€‚

* [-Python3]

```python
import queue
class MaxQueue:

    def __init__(self):
        self.deque = queue.deque()

    def max_value(self) -> int:
        return max(self.deque) if self.deque else -1

    def push_back(self, value: int) -> None:
        self.deque.append(value)

    def pop_front(self) -> int:
        return self.deque.popleft() if self.deque else -1
```

* [-C++]

```cpp
class MaxQueue {
    int q[20000];
    int begin = 0, end = 0;
public:
    MaxQueue() {
    }
    
    int max_value() {
        int ans = -1;
        for (int i = begin; i != end; ++i)
            ans = max(ans, q[i]);
        return ans;
    }
    
    void push_back(int value) {
        q[end++] = value;
    }
    
    int pop_front() {
        if (begin == end)
            return -1;
        return q[begin++];
    }
};
```

* [-Java]

```Java
class MaxQueue {
    int[] q = new int[20000];
    int begin = 0, end = 0;

    public MaxQueue() {

    }
    
    public int max_value() {
        int ans = -1;
        for (int i = begin; i != end; ++i) {
            ans = Math.max(ans, q[i]);
        }
        return ans;
    }
    
    public void push_back(int value) {
        q[end++] = value;
    }
    
    public int pop_front() {
        if (begin == end) {
            return -1;
        }
        return q[begin++];
    }
}
```

**å¤æ‚åº¦åˆ†æž**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$ï¼ˆæ’å…¥ï¼Œåˆ é™¤ï¼‰ï¼Œ$O(n)$ï¼ˆæ±‚æœ€å¤§å€¼ï¼‰ã€‚
  æ’å…¥ä¸Žåˆ é™¤åªéœ€è¦æ™®é€šçš„é˜Ÿåˆ—æ“ä½œï¼Œä¸º $O(1)$ï¼Œæ±‚æœ€å¤§å€¼éœ€è¦éåŽ†å½“å‰çš„æ•´ä¸ªé˜Ÿåˆ—ï¼Œæœ€åæƒ…å†µä¸‹ä¸º $O(n)$ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œéœ€è¦ç”¨é˜Ÿåˆ—å­˜å‚¨æ‰€æœ‰æ’å…¥çš„å…ƒç´ ã€‚

#### æ–¹æ³•äºŒï¼šç»´æŠ¤ä¸€ä¸ªå•è°ƒçš„åŒç«¯é˜Ÿåˆ—

**æ€è·¯**

æœ¬ç®—æ³•åŸºäºŽé—®é¢˜çš„ä¸€ä¸ªé‡è¦æ€§è´¨ï¼šå½“ä¸€ä¸ªå…ƒç´ è¿›å…¥é˜Ÿåˆ—çš„æ—¶å€™ï¼Œå®ƒå‰é¢æ‰€æœ‰æ¯”å®ƒå°çš„å…ƒç´ å°±ä¸ä¼šå†å¯¹ç­”æ¡ˆäº§ç”Ÿå½±å“ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æžœæˆ‘ä»¬å‘é˜Ÿåˆ—ä¸­æ’å…¥æ•°å­—åºåˆ— `1 1 1 1 2`ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€ä¸ªæ•°å­— 2 è¢«æ’å…¥åŽï¼Œæ•°å­— 2 å‰é¢çš„æ‰€æœ‰æ•°å­— 1 å°†ä¸ä¼šå¯¹ç»“æžœäº§ç”Ÿå½±å“ã€‚å› ä¸ºæŒ‰ç…§é˜Ÿåˆ—çš„å–å‡ºé¡ºåºï¼Œæ•°å­— 2 åªèƒ½åœ¨æ‰€æœ‰çš„æ•°å­— 1 è¢«å–å‡ºä¹‹åŽæ‰èƒ½è¢«å–å‡ºï¼Œå› æ­¤å¦‚æžœæ•°å­— 1 å¦‚æžœåœ¨é˜Ÿåˆ—ä¸­ï¼Œé‚£ä¹ˆæ•°å­— 2 å¿…ç„¶ä¹Ÿåœ¨é˜Ÿåˆ—ä¸­ï¼Œä½¿å¾—æ•°å­— 1 å¯¹ç»“æžœæ²¡æœ‰å½±å“ã€‚

æŒ‰ç…§ä¸Šé¢çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡è¿™æ ·çš„æ–¹æ³•ï¼šä»Žé˜Ÿåˆ—å°¾éƒ¨æ’å…¥å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æå‰å–å‡ºé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¯”è¿™ä¸ªå…ƒç´ å°çš„å…ƒç´ ï¼Œä½¿å¾—é˜Ÿåˆ—ä¸­åªä¿ç•™å¯¹ç»“æžœæœ‰å½±å“çš„æ•°å­—ã€‚è¿™æ ·çš„æ–¹æ³•ç­‰ä»·äºŽè¦æ±‚ç»´æŒé˜Ÿåˆ—å•è°ƒé€’å‡ï¼Œå³è¦ä¿è¯æ¯ä¸ªå…ƒç´ çš„å‰é¢éƒ½æ²¡æœ‰æ¯”å®ƒå°çš„å…ƒç´ ã€‚

é‚£ä¹ˆå¦‚ä½•é«˜æ•ˆå®žçŽ°ä¸€ä¸ªå§‹ç»ˆé€’å‡çš„é˜Ÿåˆ—å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦åœ¨æ’å…¥æ¯ä¸€ä¸ªå…ƒç´  `value` æ—¶ï¼Œä»Žé˜Ÿåˆ—å°¾éƒ¨ä¾æ¬¡å–å‡ºæ¯”å½“å‰å…ƒç´  `value` å°çš„å…ƒç´ ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´  `value'` å³å¯ã€‚

- ä¸Šé¢çš„è¿‡ç¨‹ä¿è¯äº†åªè¦åœ¨å…ƒç´  `value` è¢«æ’å…¥ä¹‹å‰é˜Ÿåˆ—é€’å‡ï¼Œé‚£ä¹ˆåœ¨ `value` è¢«æ’å…¥ä¹‹åŽé˜Ÿåˆ—ä¾ç„¶é€’å‡ã€‚
- è€Œé˜Ÿåˆ—çš„åˆå§‹çŠ¶æ€ï¼ˆç©ºé˜Ÿåˆ—ï¼‰ç¬¦åˆå•è°ƒé€’å‡çš„å®šä¹‰ã€‚
- ç”±æ•°å­¦å½’çº³æ³•å¯çŸ¥é˜Ÿåˆ—å°†ä¼šå§‹ç»ˆä¿æŒå•è°ƒé€’å‡ã€‚

ä¸Šé¢çš„è¿‡ç¨‹éœ€è¦ä»Žé˜Ÿåˆ—å°¾éƒ¨å–å‡ºå…ƒç´ ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨åŒç«¯é˜Ÿåˆ—æ¥å®žçŽ°ã€‚å¦å¤–æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªè¾…åŠ©é˜Ÿåˆ—æ¥è®°å½•æ‰€æœ‰è¢«æ’å…¥çš„å€¼ï¼Œä»¥ç¡®å®š `pop_front` å‡½æ•°çš„è¿”å›žå€¼ã€‚

ä¿è¯äº†é˜Ÿåˆ—å•è°ƒé€’å‡åŽï¼Œæ±‚æœ€å¤§å€¼æ—¶åªéœ€è¦ç›´æŽ¥å–åŒç«¯é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€é¡¹å³å¯ã€‚

* [-Python3]

```python
import queue
class MaxQueue:

    def __init__(self):
        self.deque = queue.deque()
        self.queue = queue.Queue()

    def max_value(self) -> int:
        return self.deque[0] if self.deque else -1


    def push_back(self, value: int) -> None:
        while self.deque and self.deque[-1] < value:
            self.deque.pop()
        self.deque.append(value)
        self.queue.put(value)

    def pop_front(self) -> int:
        if not self.deque:
            return -1
        ans = self.queue.get()
        if ans == self.deque[0]:
            self.deque.popleft()
        return ans
```

* [-C++]

```cpp
class MaxQueue {
    queue<int> q;
    deque<int> d;
public:
    MaxQueue() {
    }
    
    int max_value() {
        if (d.empty())
            return -1;
        return d.front();
    }
    
    void push_back(int value) {
        while (!d.empty() && d.back() < value) {
            d.pop_back();
        }
        d.push_back(value);
        q.push(value);
    }
    
    int pop_front() {
        if (q.empty())
            return -1;
        int ans = q.front();
        if (ans == d.front()) {
            d.pop_front();
        }
        q.pop();
        return ans;
    }
};
```

* [-Java]

```Java
class MaxQueue {
    Queue<Integer> q;
    Deque<Integer> d;

    public MaxQueue() {
        q = new LinkedList<Integer>();
        d = new LinkedList<Integer>();
    }
    
    public int max_value() {
        if (d.isEmpty()) {
            return -1;
        }
        return d.peekFirst();
    }
    
    public void push_back(int value) {
        while (!d.isEmpty() && d.peekLast() < value) {
            d.pollLast();
        }
        d.offerLast(value);
        q.offer(value);
    }
    
    public int pop_front() {
        if (q.isEmpty()) {
            return -1;
        }
        int ans = q.poll();
        if (ans == d.peekFirst()) {
            d.pollFirst();
        }
        return ans;
    }
}
```

**å¤æ‚åº¦åˆ†æž**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$ï¼ˆæ’å…¥ï¼Œåˆ é™¤ï¼Œæ±‚æœ€å¤§å€¼ï¼‰
  åˆ é™¤æ“ä½œäºŽæ±‚æœ€å¤§å€¼æ“ä½œæ˜¾ç„¶åªéœ€è¦ $O(1)$ çš„æ—¶é—´ã€‚
  è€Œæ’å…¥æ“ä½œè™½ç„¶çœ‹èµ·æ¥æœ‰å¾ªçŽ¯ï¼Œåšä¸€ä¸ªæ’å…¥æ“ä½œæ—¶æœ€å¤šå¯èƒ½ä¼šæœ‰ $n$ æ¬¡å‡ºé˜Ÿæ“ä½œã€‚ä½†è¦æ³¨æ„ï¼Œç”±äºŽæ¯ä¸ªæ•°å­—åªä¼šå‡ºé˜Ÿä¸€æ¬¡ï¼Œå› æ­¤å¯¹äºŽæ‰€æœ‰çš„ $n$ ä¸ªæ•°å­—çš„æ’å…¥è¿‡ç¨‹ï¼Œå¯¹åº”çš„æ‰€æœ‰å‡ºé˜Ÿæ“ä½œä¹Ÿä¸ä¼šå¤§äºŽ $n$ æ¬¡ã€‚å› æ­¤å°†å‡ºé˜Ÿçš„æ—¶é—´å‡æ‘Šåˆ°æ¯ä¸ªæ’å…¥æ“ä½œä¸Šï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œéœ€è¦ç”¨é˜Ÿåˆ—å­˜å‚¨æ‰€æœ‰æ’å…¥çš„å…ƒç´ ã€‚

